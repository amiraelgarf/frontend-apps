{"version":3,"file":"right-click-menu.entry.esm.js","sources":["src/components/Html-Tags-Component/right-click-menu/right-click-menu.css?tag=right-click-menu&encapsulation=shadow","src/components/Html-Tags-Component/right-click-menu/right-click-menu.tsx"],"sourcesContent":[".context-menu {\r\n  position: absolute;\r\n  list-style-type:none;\r\n  padding: 5px;\r\n  margin: 0;\r\n  width: 250px;\r\n  background-image: linear-gradient(to right top, #0b0b0b,#1f1f1f,#323232,#454545,#5a5a5a);\r\n  color: white;\r\n  box-shadow: 0px 2px 2px 0px rgba(0,0,0,0.5), inset 0px -3px 6px -2px rgba(0,0,0,0.3);\r\n}\r\n\r\n.context-menu li {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 5px 10px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  transition: bakground-color 0.3 ease;\r\n}\r\n.context-menu li:hover {\r\n  background-color: #555;\r\n}\r\n.context-menu li img{\r\n  margin-right: 10px;\r\n  width: 16px;\r\n  height: 16px;\r\n}\r\n.submenu{\r\n  display: none;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 250px;\r\n  background-image: linear-gradient(to right top, #0b0b0b,#1f1f1f,#323232,#454545,#5a5a5a);\r\n  padding: 4px;\r\n  list-style-type: none;\r\n  width: 150px;\r\n  box-shadow: 0px 2px 2px 0px rgba(0,0,0,0.5), inset 0px -3px 6px -2px rgba(0,0,0,0.3);\r\n  color: white;\r\n}\r\n.has-submenu::after {\r\n  content: 'â–¶';\r\n  position: absolute;\r\n  right: 10px;\r\n  font-size: 12px;\r\n  color: white;\r\n}\r\n.has-submenu:hover .submenu{\r\n  display: block;\r\n}\r\n\r\n.menu-divider {\r\n  border: none;\r\n  border-top: 1px solid lightgray;\r\n  margin: 5px 0;\r\n  opacity: 0.5;\r\n}","import { Component, Prop, State,Element,Watch,h } from '@stencil/core';\r\n\r\n\r\ntype DataItem={\r\n    idItem:string //for when selecting spesific item\r\n    iconImage: string\r\n    textData:string\r\n    functionality: (...args:any) => any//if there is a functinality for this item on the Menu\r\n    hasChildren:boolean\r\n    children: DataItem [] //if it has children\r\n    isDivisor:boolean\r\n}\r\n\r\n@Component({\r\n    tag:\"right-click-menu\",\r\n    styleUrl:\"right-click-menu.css\",\r\n    shadow:true\r\n})\r\nexport class RightClickMenu\r\n{\r\n    @Prop() theItems: DataItem[] = [];\r\n    @State() menuVisible:boolean = false;\r\n\r\n    @State() menuPosition: { x: number; y: number } = { x: 0, y: 0 };//the mouse click position\r\n\r\n    @State() adjustedPosition: { x: number; y: number } = { x: 0, y: 0 };//the adjusted position of the menu to keep it within the viewport\r\n\r\n    @State() submenuAdjustedPositionX: number = 250; //calculated X position for submenus (left or right of parent)\r\n\r\n    @Element() hostElement!: HTMLElement;//dah bi3br 3n al <right-click-menu>\r\n\r\n    private menuElementRef!: HTMLUListElement; //dah represent al <ul>\r\n\r\n     componentDidLoad() {//3mlna kida 3lshan ikon global Event Listener\r\n\r\n        // Attach the right-click event listener to the host element\r\n        this.hostElement.addEventListener('contextmenu', this.handleRightClick.bind(this));\r\n        // Attach a click event listener to the entire document to close the menu\r\n        // when the user clicks anywhere outside of it.\r\n        document.addEventListener('click', this.handleClickOutside.bind(this));\r\n    }\r\n\r\n    disconnectedCallback() {//For memory leaks\r\n        this.hostElement.removeEventListener('contextmenu', this.handleRightClick.bind(this));\r\n        document.removeEventListener('click', this.handleClickOutside.bind(this));\r\n    }\r\n\r\n    @Watch('menuVisible')\r\n    @Watch('menuPosition')\r\n    adjustMenuPosition() {\r\n        // Only adjust if the menu is visible and its DOM element is available\r\n        if (this.menuVisible && this.menuElementRef) {\r\n            const viewportWidth = window.innerWidth;\r\n            const viewportHeight = window.innerHeight;\r\n            const menuWidth = 260; \r\n            const menuHeight = this.menuElementRef.offsetHeight; // Get actual height of the menu\r\n\r\n            let xPos = this.menuPosition.x;\r\n            let yPos = this.menuPosition.y;\r\n\r\n            // Adjust X position: If menu goes off right edge, move it left\r\n            if (xPos + menuWidth > viewportWidth) {\r\n                xPos = viewportWidth - menuWidth;\r\n            }\r\n            // Adjust Y position: If menu goes off bottom edge, move it up\r\n            if (yPos + menuHeight > viewportHeight) {\r\n                yPos = viewportHeight - menuHeight;\r\n            }\r\n\r\n            // Update the adjusted position state, triggering a re-render\r\n            this.adjustedPosition = { x: xPos, y: yPos };\r\n\r\n            // Calculate submenu X position: If submenu would go off right edge,\r\n            // position it to the left of its parent menu item.\r\n            const submenuWidth = 150;\r\n            this.submenuAdjustedPositionX = (xPos + menuWidth + submenuWidth > viewportWidth) ? -submenuWidth : menuWidth;\r\n        }\r\n    }\r\n\r\n    //Show the custom menu \r\n    handleRightClick(e: MouseEvent) {\r\n        e.preventDefault(); \r\n        this.menuPosition = { x: e.clientX, y: e.clientY }; // store the location of the mouse click\r\n        this.menuVisible = true; //dah hi5li al Watch tsht8l\r\n    }\r\n\r\n    //If clicked outside the the menu area\r\n    handleClickOutside(e: MouseEvent) {\r\n        if (this.menuVisible \r\n            && this.menuElementRef //for safe check\r\n            && !this.menuElementRef.contains(e.target as Node)//if it NOT inside the menu\r\n        )\r\n        {\r\n            this.menuVisible = false; // Hide the menu\r\n        }\r\n    }\r\n    \r\n    renderTheMenu(item:DataItem)\r\n    {\r\n        if(item.isDivisor)\r\n        {\r\n            return(<hr class = \"menu-divider\"></hr>)\r\n        }\r\n\r\n        return(<li \r\n        id={item.idItem} \r\n        class={{ 'has-submenu': item.hasChildren }}//if he has children this the class= 'has-submenu'\r\n        onClick={() => {\r\n                    // Execute the functionality if provided\r\n                    if (item.functionality) {\r\n                        item.functionality();\r\n                    }\r\n                    this.menuVisible = false; // Close the menu after an item is clicked\r\n                }}\r\n        >\r\n        {item.iconImage && (\r\n            <img src={item.iconImage} alt={item.iconImage ||'icon'}>\r\n            </img>\r\n        )}\r\n        {item.textData}\r\n        {item.hasChildren &&(\r\n            <ul  class=\"submenu\" style={{\r\n                        top: '0px', \r\n                        left: `${this.submenuAdjustedPositionX}px`, //left or right of the menu \r\n                    }}>\r\n                {item.children.map(child=> this.renderTheMenu(child))}\r\n            </ul>\r\n        )}\r\n        </li>);\r\n    }\r\n    render(){\r\n        return(<div  style={{ height: '100vh', width: '100vw', overflow: 'hidden', position: 'relative' }}>\r\n            {this.menuVisible && ( \r\n                <ul\r\n                        ref={(el) => this.menuElementRef = el as HTMLUListElement} //3lshan calculation when click\r\n                        class=\"context-menu\"\r\n                        style={{\r\n                            // ensure the menu doesn't go off the bottom of the viewport\r\n                            top: `${this.adjustedPosition.y}px`, \r\n                            left: `${this.adjustedPosition.x}px` \r\n                        }}>\r\n                    {this.theItems.map(i=>this.renderTheMenu(i))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n\r\n        )\r\n    }\r\n}"],"names":[],"mappings":"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"}