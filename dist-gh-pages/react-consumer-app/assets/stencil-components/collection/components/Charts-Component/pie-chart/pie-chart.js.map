{"version":3,"file":"pie-chart.js","sourceRoot":"","sources":["../../../../../src/components/Charts-Component/pie-chart/pie-chart.tsx"],"names":[],"mappings":"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","sourcesContent":["// src/components/pie-chart/pie-chart.tsx\r\nimport { Component, Prop, h, Element } from '@stencil/core';\r\nimport * as d3 from 'd3';\r\n\r\n@Component({\r\n  tag: 'pie-chart',\r\n  styleUrl: 'pie-chart.css',\r\n  shadow: true,\r\n})\r\nexport class PieChart {\r\n  @Element() el!: HTMLElement;\r\n\r\n  @Prop() data: { label: string; value: number }[] = [];\r\n\r\n  componentDidLoad() {\r\n    this.drawChart();\r\n  }\r\n\r\n  drawChart() {\r\n    const svgEl = this.el.shadowRoot?.querySelector('#pie-chart') as SVGSVGElement | null;\r\n    if (!svgEl || !this.data.length) return;\r\n\r\n    const width = 300;\r\n    const height = 300;\r\n    const radius = Math.min(width, height) / 2;\r\n\r\n    // Clear previous chart content\r\n    d3.select(svgEl).selectAll('*').remove();\r\n\r\n    const svg = d3\r\n      .select(svgEl)\r\n      .attr('width', width)\r\n      .attr('height', height)\r\n      .append('g')\r\n      .attr('transform', `translate(${width / 2}, ${height / 2})`);\r\n\r\n    const color = d3.scaleOrdinal(d3.schemeTableau10);\r\n    const pie = d3.pie<{ label: string; value: number }>().value((d) => d.value);\r\n    const arc = d3.arc<d3.PieArcDatum<{ label: string; value: number }>>()\r\n      .innerRadius(0)\r\n      .outerRadius(radius);\r\n\r\n    \r\n    let tooltip = this.el.shadowRoot?.querySelector('.tooltip') as HTMLDivElement | null;\r\n    if (!tooltip && this.el.shadowRoot) {\r\n      tooltip = document.createElement('div');\r\n      tooltip.className = 'tooltip';\r\n      this.el.shadowRoot.appendChild(tooltip);\r\n    }\r\n\r\n    const arcs = svg.selectAll('arc').data(pie(this.data)).enter().append('g');\r\n\r\n    arcs\r\n      .append('path')\r\n      .attr('d', arc)\r\n      .attr('fill', (_, i) => color(i.toString()))\r\n      .on('mouseover', (_, d) => {\r\n        if (tooltip) {\r\n          tooltip.textContent = `${d.data.label}: ${d.data.value}`;\r\n          tooltip.style.opacity = '1';\r\n        }\r\n      })\r\n      .on('mousemove', (event) => {\r\n        if (tooltip) {\r\n          tooltip.style.left = `${event.offsetX + 10}px`;\r\n          tooltip.style.top = `${event.offsetY + 10}px`;\r\n        }\r\n      })\r\n      .on('mouseout', () => {\r\n        if (tooltip) {\r\n          tooltip.style.opacity = '0';\r\n        }\r\n      });\r\n\r\n    arcs\r\n      .append('text')\r\n      .attr('transform', (d) => `translate(${arc.centroid(d)})`)\r\n      .attr('text-anchor', 'middle')\r\n      .attr('font-size', '12px')\r\n      .attr('fill', 'white')\r\n      .text((d) => d.data.label);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <svg id=\"pie-chart\"></svg>\r\n        {/* Tooltip container lives outside the SVG */}\r\n        <div class=\"tooltip\" style={{ position: 'absolute' }}></div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n"]}