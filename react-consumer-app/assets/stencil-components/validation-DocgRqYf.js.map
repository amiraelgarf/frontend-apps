{"version":3,"file":"validation-DocgRqYf.js","sources":["node_modules/@siemens/ix/dist/collection/components/utils/input/validation.js"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2024 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { getElement } from \"@stencil/core\";\nexport async function isTouched(host) {\n    if (typeof host.isTouched === 'function') {\n        return host.isTouched();\n    }\n}\nexport async function shouldSuppressInternalValidation(host) {\n    if (host.getAssociatedFormElement &&\n        typeof host.getAssociatedFormElement === 'function') {\n        const form = await host.getAssociatedFormElement();\n        if (!form) {\n            return false;\n        }\n        return form.noValidate;\n    }\n    return false;\n}\nexport function createClassMutationObserver(element, callback, options) {\n    const observer = new MutationObserver(callback);\n    observer.observe(element, {\n        subtree: options === null || options === void 0 ? void 0 : options.includeChildren,\n        childList: options === null || options === void 0 ? void 0 : options.includeChildren,\n        attributes: true,\n        attributeFilter: ['class'],\n    });\n    return {\n        destroy() {\n            observer.disconnect();\n        },\n    };\n}\nfunction containsClass(hostElement, className, includeChildren) {\n    return (hostElement.classList.contains(`${className}`) ||\n        (includeChildren ? !!hostElement.querySelector(`.${className}`) : false));\n}\nexport function checkFieldClasses(hostElement, includeChildren = false) {\n    return {\n        isInvalid: containsClass(hostElement, 'ix-invalid', includeChildren),\n        isInvalidByRequired: containsClass(hostElement, 'ix-invalid--required', includeChildren),\n        isValid: containsClass(hostElement, 'ix-valid', includeChildren),\n        isInfo: containsClass(hostElement, 'ix-info', includeChildren),\n        isWarning: containsClass(hostElement, 'ix-warning', includeChildren),\n    };\n}\nexport function HookValidationLifecycle(options) {\n    return (proto, methodName) => {\n        let checkIfRequiredFunction;\n        let classMutationObserver;\n        const { componentWillLoad, disconnectedCallback, connectedCallback } = proto;\n        proto.connectedCallback = function () {\n            const host = getElement(this);\n            checkIfRequiredFunction = async () => {\n                const skipValidation = await shouldSuppressInternalValidation(host);\n                if (skipValidation) {\n                    return;\n                }\n                if (host.hasValidValue && typeof host.hasValidValue === 'function') {\n                    const hasValue = await host.hasValidValue();\n                    const touched = await isTouched(host);\n                    if (host.required) {\n                        host.classList.toggle('ix-invalid--required', !hasValue && touched);\n                    }\n                    else {\n                        host.classList.remove('ix-invalid--required');\n                    }\n                }\n                if (host.getValidityState &&\n                    typeof host.getValidityState === 'function') {\n                    const validityState = await host.getValidityState();\n                    host.classList.toggle(`ix-invalid--validity-patternMismatch`, validityState.patternMismatch);\n                }\n            };\n            host.addEventListener('checkedChange', checkIfRequiredFunction);\n            host.addEventListener('valueChange', checkIfRequiredFunction);\n            host.addEventListener('ixBlur', checkIfRequiredFunction);\n            setTimeout(checkIfRequiredFunction);\n            return connectedCallback === null || connectedCallback === void 0 ? void 0 : connectedCallback.call(this);\n        };\n        proto.componentWillLoad = function () {\n            const host = getElement(this);\n            classMutationObserver = createClassMutationObserver(host, () => {\n                const result = checkFieldClasses(host, options === null || options === void 0 ? void 0 : options.includeChildren);\n                proto[methodName].call(this, result);\n            }, options);\n            const result = checkFieldClasses(host, options === null || options === void 0 ? void 0 : options.includeChildren);\n            proto[methodName].call(this, result);\n            return componentWillLoad === null || componentWillLoad === void 0 ? void 0 : componentWillLoad.call(this);\n        };\n        proto.disconnectedCallback = function () {\n            const host = getElement(this);\n            if (host && classMutationObserver) {\n                classMutationObserver.destroy();\n                classMutationObserver = null;\n            }\n            if (host && checkIfRequiredFunction) {\n                host.removeEventListener('checkedChange', checkIfRequiredFunction);\n                host.removeEventListener('valueChange', checkIfRequiredFunction);\n                host.removeEventListener('ixBlur', checkIfRequiredFunction);\n                checkIfRequiredFunction = null;\n            }\n            return disconnectedCallback === null || disconnectedCallback === void 0 ? void 0 : disconnectedCallback.call(this);\n        };\n    };\n}\n//# sourceMappingURL=validation.js.map\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}