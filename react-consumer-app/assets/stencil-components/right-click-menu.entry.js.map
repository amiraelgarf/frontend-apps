{"version":3,"file":"right-click-menu.entry.js","sources":["src/components/Html-Tags-Component/right-click-menu/right-click-menu.css?tag=right-click-menu&encapsulation=shadow","src/components/Html-Tags-Component/right-click-menu/right-click-menu.tsx"],"sourcesContent":[".context-menu {\n  position: absolute;\n  list-style-type:none;\n  padding: 5px;\n  margin: 0;\n  width: 250px;\n  background-image: linear-gradient(to right top, #0b0b0b,#1f1f1f,#323232,#454545,#5a5a5a);\n  color: white;\n  box-shadow: 0px 2px 2px 0px rgba(0,0,0,0.5), inset 0px -3px 6px -2px rgba(0,0,0,0.3);\n}\n\n.context-menu li {\n  display: flex;\n  align-items: center;\n  padding: 5px 10px;\n  cursor: pointer;\n  position: relative;\n  transition: bakground-color 0.3 ease;\n}\n.context-menu li:hover {\n  background-color: #555;\n}\n.context-menu li img{\n  margin-right: 10px;\n  width: 16px;\n  height: 16px;\n}\n.submenu{\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 250px;\n  background-image: linear-gradient(to right top, #0b0b0b,#1f1f1f,#323232,#454545,#5a5a5a);\n  padding: 4px;\n  list-style-type: none;\n  width: 150px;\n  box-shadow: 0px 2px 2px 0px rgba(0,0,0,0.5), inset 0px -3px 6px -2px rgba(0,0,0,0.3);\n  color: white;\n}\n.has-submenu::after {\n  content: 'â–¶';\n  position: absolute;\n  right: 10px;\n  font-size: 12px;\n  color: white;\n}\n.has-submenu:hover .submenu{\n  display: block;\n}\n\n.menu-divider {\n  border: none;\n  border-top: 1px solid lightgray;\n  margin: 5px 0;\n  opacity: 0.5;\n}","import { Component, Prop, State,Element,Watch,h } from '@stencil/core';\n\n\ntype DataItem={\n    idItem:string //for when selecting spesific item\n    iconImage: string\n    textData:string\n    functionality: (...args:any) => any//if there is a functinality for this item on the Menu\n    hasChildren:boolean\n    children: DataItem [] //if it has children\n    isDivisor:boolean\n}\n\n@Component({\n    tag:\"right-click-menu\",\n    styleUrl:\"right-click-menu.css\",\n    shadow:true\n})\nexport class RightClickMenu\n{\n    @Prop() theItems: DataItem[] = [];\n    @State() menuVisible:boolean = false;\n\n    @State() menuPosition: { x: number; y: number } = { x: 0, y: 0 };//the mouse click position\n\n    @State() adjustedPosition: { x: number; y: number } = { x: 0, y: 0 };//the adjusted position of the menu to keep it within the viewport\n\n    @State() submenuAdjustedPositionX: number = 250; //calculated X position for submenus (left or right of parent)\n\n    @Element() hostElement!: HTMLElement;//dah bi3br 3n al <right-click-menu>\n\n    private menuElementRef!: HTMLUListElement; //dah represent al <ul>\n\n     componentDidLoad() {//3mlna kida 3lshan ikon global Event Listener\n\n        // Attach the right-click event listener to the host element\n        this.hostElement.addEventListener('contextmenu', this.handleRightClick.bind(this));\n        // Attach a click event listener to the entire document to close the menu\n        // when the user clicks anywhere outside of it.\n        document.addEventListener('click', this.handleClickOutside.bind(this));\n    }\n\n    disconnectedCallback() {//For memory leaks\n        this.hostElement.removeEventListener('contextmenu', this.handleRightClick.bind(this));\n        document.removeEventListener('click', this.handleClickOutside.bind(this));\n    }\n\n    @Watch('menuVisible')\n    @Watch('menuPosition')\n    adjustMenuPosition() {\n        // Only adjust if the menu is visible and its DOM element is available\n        if (this.menuVisible && this.menuElementRef) {\n            const viewportWidth = window.innerWidth;\n            const viewportHeight = window.innerHeight;\n            const menuWidth = 260; \n            const menuHeight = this.menuElementRef.offsetHeight; // Get actual height of the menu\n\n            let xPos = this.menuPosition.x;\n            let yPos = this.menuPosition.y;\n\n            // Adjust X position: If menu goes off right edge, move it left\n            if (xPos + menuWidth > viewportWidth) {\n                xPos = viewportWidth - menuWidth;\n            }\n            // Adjust Y position: If menu goes off bottom edge, move it up\n            if (yPos + menuHeight > viewportHeight) {\n                yPos = viewportHeight - menuHeight;\n            }\n\n            // Update the adjusted position state, triggering a re-render\n            this.adjustedPosition = { x: xPos, y: yPos };\n\n            // Calculate submenu X position: If submenu would go off right edge,\n            // position it to the left of its parent menu item.\n            const submenuWidth = 150;\n            this.submenuAdjustedPositionX = (xPos + menuWidth + submenuWidth > viewportWidth) ? -submenuWidth : menuWidth;\n        }\n    }\n\n    //Show the custom menu \n    handleRightClick(e: MouseEvent) {\n        e.preventDefault(); \n        this.menuPosition = { x: e.clientX, y: e.clientY }; // store the location of the mouse click\n        this.menuVisible = true; //dah hi5li al Watch tsht8l\n    }\n\n    //If clicked outside the the menu area\n    handleClickOutside(e: MouseEvent) {\n        if (this.menuVisible \n            && this.menuElementRef //for safe check\n            && !this.menuElementRef.contains(e.target as Node)//if it NOT inside the menu\n        )\n        {\n            this.menuVisible = false; // Hide the menu\n        }\n    }\n    \n    renderTheMenu(item:DataItem)\n    {\n        if(item.isDivisor)\n        {\n            return(<hr class = \"menu-divider\"></hr>)\n        }\n\n        return(<li \n        id={item.idItem} \n        class={{ 'has-submenu': item.hasChildren }}//if he has children this the class= 'has-submenu'\n        onClick={() => {\n                    // Execute the functionality if provided\n                    if (item.functionality) {\n                        item.functionality();\n                    }\n                    this.menuVisible = false; // Close the menu after an item is clicked\n                }}\n        >\n        {item.iconImage && (\n            <img src={item.iconImage} alt={item.iconImage ||'icon'}>\n            </img>\n        )}\n        {item.textData}\n        {item.hasChildren &&(\n            <ul  class=\"submenu\" style={{\n                        top: '0px', \n                        left: `${this.submenuAdjustedPositionX}px`, //left or right of the menu \n                    }}>\n                {item.children.map(child=> this.renderTheMenu(child))}\n            </ul>\n        )}\n        </li>);\n    }\n    render(){\n        return(<div  style={{ height: '100vh', width: '100vw', overflow: 'hidden', position: 'relative' }}>\n             <slot></slot>\n            {this.menuVisible && ( \n                <ul\n                        ref={(el) => this.menuElementRef = el as HTMLUListElement} //3lshan calculation when click\n                        class=\"context-menu\"\n                        style={{\n                            // ensure the menu doesn't go off the bottom of the viewport\n                            top: `${this.adjustedPosition.y}px`, \n                            left: `${this.adjustedPosition.x}px` \n                        }}>\n                    {this.theItems.map(i=>this.renderTheMenu(i))}\n                </ul>\n            )}\n        </div>\n\n        )\n    }\n}"],"names":[],"mappings":"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"}