{"version":3,"names":["range","start","stop","step","n","arguments","length","i","Math","max","ceil","Array","band","scale","ordinal","unknown","undefined","domain","ordinalRange","r0","r1","bandwidth","round","paddingInner","paddingOuter","align","rescale","reverse","floor","values","sequence","map","_","rangeRound","padding","min","copy","initRange","apply","d3BarChartCss","D3BarChart","chartData","width","height","currentWidth","currentHeight","svg","chartContainer","onDataChange","this","drawChart","componentDidLoad","d3.select","hostElement","shadowRoot","querySelector","updateDimensions","window","addEventListener","handleResize","componentDidUpdate","disconnectedCallback","removeEventListener","clientWidth","selectAll","remove","margin","top","right","bottom","left","innerWidth","innerHeight","attr","g","append","xScale","d3.scaleBand","d","name","yScale","d3.scaleLinear","d3.max","value","call","d3.axisBottom","d3.axisLeft","data","enter","text","render","h","key","class"],"sources":["node_modules/d3-array/src/range.js","node_modules/d3-scale/src/band.js","src/components/Charts-Component/d3-bar-chart/d3-bar-chart.css?tag=d3-bar-chart&encapsulation=shadow","src/components/Charts-Component/d3-bar-chart/d3-bar-chart.tsx"],"sourcesContent":["export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n",":host {\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\r\n  font-family: 'Inter', sans-serif;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.chart-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 300px;\r\n  padding: 1rem;\r\n  background-color: #ffffff;\r\n  border-radius: 0.5rem;\r\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\nsvg {\r\n  display: block;\r\n  overflow: visible;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.x-axis path,\r\n.y-axis path {\r\n  stroke: #cbd5e1;\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n.x-axis line,\r\n.y-axis line {\r\n  stroke: #e2e8f0;\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n.x-axis text,\r\n.y-axis text {\r\n  font-size: 0.875rem;\r\n  fill: #374151;\r\n}\r\n\r\n.bar {\r\n  fill: #3b82f6;\r\n  transition: fill 0.2s ease-in-out;\r\n}\r\n\r\n.bar:hover {\r\n  fill: #2563eb;\r\n}\r\n\r\n.bar-label {\r\n  font-size: 0.75rem;\r\n  fill: #ffffff;\r\n  font-weight: 600;\r\n  pointer-events: none;\r\n}\r\n","import { Component, Prop, h, Element, Watch, State } from '@stencil/core';\r\nimport * as d3 from 'd3';\r\n\r\ninterface ChartData {\r\n  name: string;\r\n  value: number;\r\n}\r\n\r\n@Component({\r\n  tag: 'd3-bar-chart',\r\n  styleUrl: 'd3-bar-chart.css',\r\n  shadow: true,\r\n})\r\nexport class D3BarChart {\r\n  @Element() hostElement!: HTMLElement;\r\n\r\n  @Prop() chartData: ChartData[] = [];\r\n  @Prop() width: number = 0;\r\n  @Prop() height: number = 0;\r\n\r\n  @State() private currentWidth: number = 0;\r\n  @State() private currentHeight: number = 0;\r\n\r\n  private svg!: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>;\r\n  private chartContainer!: HTMLDivElement;\r\n\r\n  @Watch('chartData')\r\n  onDataChange() {\r\n    this.drawChart();\r\n  }\r\n\r\n\r\n  componentDidLoad() {\r\n\r\n    this.svg = d3.select(this.hostElement.shadowRoot!.querySelector('svg')!) as unknown as d3.Selection<SVGSVGElement, unknown, HTMLElement, any>;\r\n    this.chartContainer = this.hostElement.shadowRoot!.querySelector('.chart-container')! as HTMLDivElement;\r\n    this.updateDimensions();\r\n    this.drawChart();\r\n\r\n    window.addEventListener('resize', this.handleResize);\r\n  }\r\n\r\n\r\n  componentDidUpdate() {\r\n    this.updateDimensions();\r\n    this.drawChart();\r\n  }\r\n\r\n\r\n  disconnectedCallback() {\r\n    window.removeEventListener('resize', this.handleResize);\r\n  }\r\n\r\n\r\n  private handleResize = () => {\r\n    this.updateDimensions();\r\n    this.drawChart();\r\n  };\r\n\r\n\r\n  private updateDimensions = () => {\r\n    if (this.width > 0 && this.height > 0) {\r\n      this.currentWidth = this.width;\r\n      this.currentHeight = this.height;\r\n    } else if (this.chartContainer) {\r\n      this.currentWidth = this.chartContainer.clientWidth || 400;\r\n      this.currentHeight = 400;\r\n    } else {\r\n      this.currentWidth = 400;\r\n      this.currentHeight = 400;\r\n    }\r\n  };\r\n\r\n\r\n  private drawChart = () => {\r\n    if (!this.svg || !this.chartData || this.chartData.length === 0 || this.currentWidth === 0 || this.currentHeight === 0) {\r\n      if (this.svg) this.svg.selectAll('*').remove();\r\n      return;\r\n    }\r\n\r\n    const margin = { top: 20, right: 30, bottom: 40, left: 40 };\r\n    const innerWidth = this.currentWidth - margin.left - margin.right;\r\n    const innerHeight = this.currentHeight - margin.top - margin.bottom;\r\n\r\n    this.svg.selectAll('*').remove();\r\n\r\n    this.svg\r\n      .attr('width', this.currentWidth)\r\n      .attr('height', this.currentHeight);\r\n\r\n    const g = this.svg.append('g')\r\n      .attr('transform', `translate(${margin.left},${margin.top})`);\r\n\r\n    const xScale = d3.scaleBand<string>()\r\n      .domain(this.chartData.map(d => d.name))\r\n      .range([0, innerWidth])\r\n      .padding(0.1);\r\n\r\n    const yScale = d3.scaleLinear()\r\n      .domain([0, d3.max(this.chartData, d => d.value) || 0])\r\n      .range([innerHeight, 0]);\r\n\r\n    g.append('g')\r\n      .attr('class', 'x-axis')\r\n      .attr('transform', `translate(0,${innerHeight})`)\r\n      .call(d3.axisBottom(xScale))\r\n      .selectAll('text')\r\n      .attr('class', 'text-sm fill-gray-700');\r\n\r\n    g.append('g')\r\n      .attr('class', 'y-axis')\r\n      .call(d3.axisLeft(yScale))\r\n      .selectAll('text')\r\n      .attr('class', 'text-sm fill-gray-700');\r\n\r\n    g.selectAll('.bar')\r\n      .data(this.chartData)\r\n      .enter()\r\n      .append('rect')\r\n      .attr('class', 'bar fill-blue-500 hover:fill-blue-600 transition-colors duration-200')\r\n      .attr('x', d => xScale(d.name)!)\r\n      .attr('y', d => yScale(d.value))\r\n      .attr('width', xScale.bandwidth())\r\n      .attr('height', d => innerHeight - yScale(d.value));\r\n\r\n    g.selectAll('.bar-label')\r\n      .data(this.chartData)\r\n      .enter()\r\n      .append('text')\r\n      .attr('class', 'bar-label text-xs fill-white font-semibold pointer-events-none')\r\n      .attr('x', d => xScale(d.name)! + xScale.bandwidth() / 2)\r\n      .attr('y', d => yScale(d.value) + 15)\r\n      .attr('text-anchor', 'middle')\r\n      .text(d => d.value);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"chart-container\">\r\n        <svg></svg>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}