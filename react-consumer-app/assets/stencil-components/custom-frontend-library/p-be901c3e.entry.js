import{r as t,g as i,h as e}from"./p-crweC_lX.js";import{o as s,i as r,s as n}from"./p-AkiUVwtn.js";import{l as a,m as h,a as o,b as c}from"./p-DCeK6rus.js";function f(t,i,e){t=+t,i=+i,e=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+e;var s=-1,r=Math.max(0,Math.ceil((i-t)/e))|0,n=new Array(r);while(++s<r){n[s]=t+s*e}return n}function l(){var t=s().unknown(undefined),i=t.domain,e=t.range,n=0,a=1,h,o,c=false,d=0,u=0,x=.5;delete t.unknown;function b(){var t=i().length,s=a<n,r=s?a:n,l=s?n:a;h=(l-r)/Math.max(1,t-d+u*2);if(c)h=Math.floor(h);r+=(l-r-h*(t-d))*x;o=h*(1-d);if(c)r=Math.round(r),o=Math.round(o);var b=f(t).map((function(t){return r+h*t}));return e(s?b.reverse():b)}t.domain=function(t){return arguments.length?(i(t),b()):i()};t.range=function(t){return arguments.length?([n,a]=t,n=+n,a=+a,b()):[n,a]};t.rangeRound=function(t){return[n,a]=t,n=+n,a=+a,c=true,b()};t.bandwidth=function(){return o};t.step=function(){return h};t.round=function(t){return arguments.length?(c=!!t,b()):c};t.padding=function(t){return arguments.length?(d=Math.min(1,u=+t),b()):d};t.paddingInner=function(t){return arguments.length?(d=Math.min(1,t),b()):d};t.paddingOuter=function(t){return arguments.length?(u=+t,b()):u};t.align=function(t){return arguments.length?(x=Math.max(0,Math.min(1,t)),b()):x};t.copy=function(){return l(i(),[n,a]).round(c).paddingInner(d).paddingOuter(u).align(x)};return r.apply(b(),arguments)}const d=":host{display:block;width:100%;height:100%;font-family:'Inter', sans-serif;box-sizing:border-box}.chart-container{display:flex;justify-content:center;align-items:center;min-height:300px;padding:1rem;background-color:#ffffff;border-radius:0.5rem;box-shadow:0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);width:100%;height:100%}svg{display:block;overflow:visible;width:100%;height:100%}.x-axis path,.y-axis path{stroke:#cbd5e1;shape-rendering:crispEdges}.x-axis line,.y-axis line{stroke:#e2e8f0;shape-rendering:crispEdges}.x-axis text,.y-axis text{font-size:0.875rem;fill:#374151}.bar{fill:#3b82f6;transition:fill 0.2s ease-in-out}.bar:hover{fill:#2563eb}.bar-label{font-size:0.75rem;fill:#ffffff;font-weight:600;pointer-events:none}";const u=class{constructor(i){t(this,i)}get hostElement(){return i(this)}chartData=[];width=0;height=0;currentWidth=0;currentHeight=0;svg;chartContainer;onDataChange(){this.drawChart()}componentDidLoad(){this.svg=n(this.hostElement.shadowRoot.querySelector("svg"));this.chartContainer=this.hostElement.shadowRoot.querySelector(".chart-container");this.updateDimensions();this.drawChart();window.addEventListener("resize",this.handleResize)}componentDidUpdate(){this.updateDimensions();this.drawChart()}disconnectedCallback(){window.removeEventListener("resize",this.handleResize)}handleResize=()=>{this.updateDimensions();this.drawChart()};updateDimensions=()=>{if(this.width>0&&this.height>0){this.currentWidth=this.width;this.currentHeight=this.height}else if(this.chartContainer){this.currentWidth=this.chartContainer.clientWidth||400;this.currentHeight=400}else{this.currentWidth=400;this.currentHeight=400}};drawChart=()=>{if(!this.svg||!this.chartData||this.chartData.length===0||this.currentWidth===0||this.currentHeight===0){if(this.svg)this.svg.selectAll("*").remove();return}const t={top:20,right:30,bottom:40,left:40};const i=this.currentWidth-t.left-t.right;const e=this.currentHeight-t.top-t.bottom;this.svg.selectAll("*").remove();this.svg.attr("width",this.currentWidth).attr("height",this.currentHeight);const s=this.svg.append("g").attr("transform",`translate(${t.left},${t.top})`);const r=l().domain(this.chartData.map((t=>t.name))).range([0,i]).padding(.1);const n=a().domain([0,h(this.chartData,(t=>t.value))||0]).range([e,0]);s.append("g").attr("class","x-axis").attr("transform",`translate(0,${e})`).call(o(r)).selectAll("text").attr("class","text-sm fill-gray-700");s.append("g").attr("class","y-axis").call(c(n)).selectAll("text").attr("class","text-sm fill-gray-700");s.selectAll(".bar").data(this.chartData).enter().append("rect").attr("class","bar fill-blue-500 hover:fill-blue-600 transition-colors duration-200").attr("x",(t=>r(t.name))).attr("y",(t=>n(t.value))).attr("width",r.bandwidth()).attr("height",(t=>e-n(t.value)));s.selectAll(".bar-label").data(this.chartData).enter().append("text").attr("class","bar-label text-xs fill-white font-semibold pointer-events-none").attr("x",(t=>r(t.name)+r.bandwidth()/2)).attr("y",(t=>n(t.value)+15)).attr("text-anchor","middle").text((t=>t.value))};render(){return e("div",{key:"d33324b0ef172a5ec79c69ada8c8a439c2f61fd6",class:"chart-container"},e("svg",{key:"d3691c21f1b9b1c0e0879baf76908250e441197d"}))}static get watchers(){return{chartData:["onDataChange"]}}};u.style=d;export{u as d3_bar_chart};
//# sourceMappingURL=p-be901c3e.entry.js.map