import{r as t,g as n,h as i}from"./p-crweC_lX.js";import{s as e,o as r}from"./p-AkiUVwtn.js";import{c as s}from"./p-CJG58WzC.js";const o=Math.PI,h=2*o,f=1e-6,a=h-f;function u(t){this._+=t[0];for(let n=1,i=t.length;n<i;++n){this._+=arguments[n]+t[n]}}function c(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return u;const i=10**n;return function(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n){this._+=Math.round(arguments[n]*i)/i+t[n]}}}class l{constructor(t){this._x0=this._y0=this._x1=this._y1=null;this._="";this._append=t==null?u:c(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._append`Z`}}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,e){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+e}`}bezierCurveTo(t,n,i,e,r,s){this._append`C${+t},${+n},${+i},${+e},${this._x1=+r},${this._y1=+s}`}arcTo(t,n,i,e,r){t=+t,n=+n,i=+i,e=+e,r=+r;if(r<0)throw new Error(`negative radius: ${r}`);let s=this._x1,h=this._y1,a=i-t,u=e-n,c=s-t,l=h-n,$=c*c+l*l;if(this._x1===null){this._append`M${this._x1=t},${this._y1=n}`}else if(!($>f));else if(!(Math.abs(l*a-u*c)>f)||!r){this._append`L${this._x1=t},${this._y1=n}`}else{let p=i-s,d=e-h,M=a*a+u*u,v=p*p+d*d,y=Math.sqrt(M),g=Math.sqrt($),m=r*Math.tan((o-Math.acos((M+$-v)/(2*y*g)))/2),w=m/g,b=m/y;if(Math.abs(w-1)>f){this._append`L${t+w*c},${n+w*l}`}this._append`A${r},${r},0,0,${+(l*p>c*d)},${this._x1=t+b*a},${this._y1=n+b*u}`}}arc(t,n,i,e,r,s){t=+t,n=+n,i=+i,s=!!s;if(i<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(e),c=i*Math.sin(e),l=t+u,$=n+c,p=1^s,d=s?e-r:r-e;if(this._x1===null){this._append`M${l},${$}`}else if(Math.abs(this._x1-l)>f||Math.abs(this._y1-$)>f){this._append`L${l},${$}`}if(!i)return;if(d<0)d=d%h+h;if(d>a){this._append`A${i},${i},0,1,${p},${t-u},${n-c}A${i},${i},0,1,${p},${this._x1=l},${this._y1=$}`}else if(d>f){this._append`A${i},${i},0,${+(d>=o)},${p},${this._x1=t+i*Math.cos(r)},${this._y1=n+i*Math.sin(r)}`}}rect(t,n,i,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+e}h${-i}Z`}toString(){return this._}}var $=s("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function p(t){return function n(){return t}}const d=Math.abs;const M=Math.atan2;const v=Math.cos;const y=Math.max;const g=Math.min;const m=Math.sin;const w=Math.sqrt;const b=1e-12;const x=Math.PI;const A=x/2;const k=2*x;function C(t){return t>1?0:t<-1?x:Math.acos(t)}function T(t){return t>=1?A:t<=-1?-A:Math.asin(t)}function z(t){let n=3;t.digits=function(i){if(!arguments.length)return n;if(i==null){n=null}else{const t=Math.floor(i);if(!(t>=0))throw new RangeError(`invalid digits: ${i}`);n=t}return t};return()=>new l(n)}function L(t){return t.innerRadius}function j(t){return t.outerRadius}function E(t){return t.startAngle}function G(t){return t.endAngle}function N(t){return t&&t.padAngle}function S(t,n,i,e,r,s,o,h){var f=i-t,a=e-n,u=o-r,c=h-s,l=c*f-u*a;if(l*l<b)return;l=(u*(n-s)-c*(t-r))/l;return[t+l*f,n+l*a]}function U(t,n,i,e,r,s,o){var h=t-i,f=n-e,a=(o?s:-s)/w(h*h+f*f),u=a*f,c=-a*h,l=t+u,$=n+c,p=i+u,d=e+c,M=(l+p)/2,v=($+d)/2,g=p-l,m=d-$,b=g*g+m*m,x=r-s,A=l*d-p*$,k=(m<0?-1:1)*w(y(0,x*x*b-A*A)),C=(A*m-g*k)/b,T=(-A*g-m*k)/b,z=(A*m+g*k)/b,L=(-A*g+m*k)/b,j=C-M,E=T-v,G=z-M,N=L-v;if(j*j+E*E>G*G+N*N)C=z,T=L;return{cx:C,cy:T,x01:-u,y01:-c,x11:C*(r/x-1),y11:T*(r/x-1)}}function V(){var t=L,n=j,i=p(0),e=null,r=E,s=G,o=N,h=null,f=z(a);function a(){var a,u,c=+t.apply(this,arguments),l=+n.apply(this,arguments),$=r.apply(this,arguments)-A,p=s.apply(this,arguments)-A,y=d(p-$),z=p>$;if(!h)h=a=f();if(l<c)u=l,l=c,c=u;if(!(l>b))h.moveTo(0,0);else if(y>k-b){h.moveTo(l*v($),l*m($));h.arc(0,0,l,$,p,!z);if(c>b){h.moveTo(c*v(p),c*m(p));h.arc(0,0,c,p,$,z)}}else{var L=$,j=p,E=$,G=p,N=y,V=y,Z=o.apply(this,arguments)/2,_=Z>b&&(e?+e.apply(this,arguments):w(c*c+l*l)),q=g(d(l-c)/2,+i.apply(this,arguments)),D=q,I=q,J,P;if(_>b){var Q=T(_/c*m(Z)),R=T(_/l*m(Z));if((N-=Q*2)>b)Q*=z?1:-1,E+=Q,G-=Q;else N=0,E=G=($+p)/2;if((V-=R*2)>b)R*=z?1:-1,L+=R,j-=R;else V=0,L=j=($+p)/2}var W=l*v(L),X=l*m(L),B=c*v(G),F=c*m(G);if(q>b){var H=l*v(j),K=l*m(j),O=c*v(E),Y=c*m(E),tt;if(y<x){if(tt=S(W,X,O,Y,H,K,B,F)){var nt=W-tt[0],it=X-tt[1],et=H-tt[0],rt=K-tt[1],st=1/m(C((nt*et+it*rt)/(w(nt*nt+it*it)*w(et*et+rt*rt)))/2),ot=w(tt[0]*tt[0]+tt[1]*tt[1]);D=g(q,(c-ot)/(st-1));I=g(q,(l-ot)/(st+1))}else{D=I=0}}}if(!(V>b))h.moveTo(W,X);else if(I>b){J=U(O,Y,W,X,l,I,z);P=U(H,K,B,F,l,I,z);h.moveTo(J.cx+J.x01,J.cy+J.y01);if(I<q)h.arc(J.cx,J.cy,I,M(J.y01,J.x01),M(P.y01,P.x01),!z);else{h.arc(J.cx,J.cy,I,M(J.y01,J.x01),M(J.y11,J.x11),!z);h.arc(0,0,l,M(J.cy+J.y11,J.cx+J.x11),M(P.cy+P.y11,P.cx+P.x11),!z);h.arc(P.cx,P.cy,I,M(P.y11,P.x11),M(P.y01,P.x01),!z)}}else h.moveTo(W,X),h.arc(0,0,l,L,j,!z);if(!(c>b)||!(N>b))h.lineTo(B,F);else if(D>b){J=U(B,F,H,K,c,-D,z);P=U(W,X,O,Y,c,-D,z);h.lineTo(J.cx+J.x01,J.cy+J.y01);if(D<q)h.arc(J.cx,J.cy,D,M(J.y01,J.x01),M(P.y01,P.x01),!z);else{h.arc(J.cx,J.cy,D,M(J.y01,J.x01),M(J.y11,J.x11),!z);h.arc(0,0,c,M(J.cy+J.y11,J.cx+J.x11),M(P.cy+P.y11,P.cx+P.x11),z);h.arc(P.cx,P.cy,D,M(P.y11,P.x11),M(P.y01,P.x01),!z)}}else h.arc(0,0,c,G,E,z)}h.closePath();if(a)return h=null,a+""||null}a.centroid=function(){var i=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,e=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-x/2;return[v(e)*i,m(e)*i]};a.innerRadius=function(n){return arguments.length?(t=typeof n==="function"?n:p(+n),a):t};a.outerRadius=function(t){return arguments.length?(n=typeof t==="function"?t:p(+t),a):n};a.cornerRadius=function(t){return arguments.length?(i=typeof t==="function"?t:p(+t),a):i};a.padRadius=function(t){return arguments.length?(e=t==null?null:typeof t==="function"?t:p(+t),a):e};a.startAngle=function(t){return arguments.length?(r=typeof t==="function"?t:p(+t),a):r};a.endAngle=function(t){return arguments.length?(s=typeof t==="function"?t:p(+t),a):s};a.padAngle=function(t){return arguments.length?(o=typeof t==="function"?t:p(+t),a):o};a.context=function(t){return arguments.length?(h=t==null?null:t,a):h};return a}function Z(t){return typeof t==="object"&&"length"in t?t:Array.from(t)}function _(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function q(t){return t}function D(){var t=q,n=_,i=null,e=p(0),r=p(k),s=p(0);function o(o){var h,f=(o=Z(o)).length,a,u,c=0,l=new Array(f),$=new Array(f),p=+e.apply(this,arguments),d=Math.min(k,Math.max(-k,r.apply(this,arguments)-p)),M,v=Math.min(Math.abs(d)/f,s.apply(this,arguments)),y=v*(d<0?-1:1),g;for(h=0;h<f;++h){if((g=$[l[h]=h]=+t(o[h],h,o))>0){c+=g}}if(n!=null)l.sort((function(t,i){return n($[t],$[i])}));else if(i!=null)l.sort((function(t,n){return i(o[t],o[n])}));for(h=0,u=c?(d-f*y)/c:0;h<f;++h,p=M){a=l[h],g=$[a],M=p+(g>0?g*u:0)+y,$[a]={data:o[a],index:h,value:g,startAngle:p,endAngle:M,padAngle:v}}return $}o.value=function(n){return arguments.length?(t=typeof n==="function"?n:p(+n),o):t};o.sortValues=function(t){return arguments.length?(n=t,i=null,o):n};o.sort=function(t){return arguments.length?(i=t,n=null,o):i};o.startAngle=function(t){return arguments.length?(e=typeof t==="function"?t:p(+t),o):e};o.endAngle=function(t){return arguments.length?(r=typeof t==="function"?t:p(+t),o):r};o.padAngle=function(t){return arguments.length?(s=typeof t==="function"?t:p(+t),o):s};return o}const I=":host{display:block;position:relative;width:100%;max-width:400px;margin:auto;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif}svg{display:block;width:100%;height:auto}path{stroke:#fff;stroke-width:2px;transition:transform 0.2s ease-in-out;cursor:pointer}path:hover{transform:scale(1.05);filter:brightness(1.1)}text{font-weight:bold;pointer-events:none}.tooltip{background:rgba(0, 0, 0, 0.75);color:white;padding:6px 10px;border-radius:4px;font-size:12px;pointer-events:none;opacity:0;transition:opacity 0.3s ease;z-index:10}";const J=class{constructor(n){t(this,n)}get el(){return n(this)}data=[];componentDidLoad(){this.drawChart()}drawChart(){const t=this.el.shadowRoot?.querySelector("#pie-chart");if(!t||!this.data.length)return;const n=300;const i=300;const s=Math.min(n,i)/2;e(t).selectAll("*").remove();const o=e(t).attr("width",n).attr("height",i).append("g").attr("transform",`translate(${n/2}, ${i/2})`);const h=r($);const f=D().value((t=>t.value));const a=V().innerRadius(0).outerRadius(s);let u=this.el.shadowRoot?.querySelector(".tooltip");if(!u&&this.el.shadowRoot){u=document.createElement("div");u.className="tooltip";this.el.shadowRoot.appendChild(u)}const c=o.selectAll("arc").data(f(this.data)).enter().append("g");c.append("path").attr("d",a).attr("fill",((t,n)=>h(n.toString()))).on("mouseover",((t,n)=>{if(u){u.textContent=`${n.data.label}: ${n.data.value}`;u.style.opacity="1"}})).on("mousemove",(t=>{if(u){u.style.left=`${t.offsetX+10}px`;u.style.top=`${t.offsetY+10}px`}})).on("mouseout",(()=>{if(u){u.style.opacity="0"}}));c.append("text").attr("transform",(t=>`translate(${a.centroid(t)})`)).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text((t=>t.data.label))}render(){return i(i.Fragment,null,i("svg",{key:"c7f89a26169a3bf477bff6c7c2a71ae88a635a82",id:"pie-chart"}),i("div",{key:"269a16b50c8be65eb112876dab3d1416f573fa85",class:"tooltip",style:{position:"absolute"}}))}};J.style=I;export{J as pie_chart};
//# sourceMappingURL=p-7f51ddac.entry.js.map