{"version":3,"file":"theme-switcher-Cfdqn9An.js","sources":["node_modules/@siemens/ix/dist/collection/components/utils/theme-switcher.js"],"sourcesContent":["import { TypedEvent } from \"./typed-event\";\nclass ThemeSwitcher {\n    get themeChanged() {\n        return this._themeChanged;\n    }\n    hasVariantSuffix(className) {\n        return (className.endsWith(this.suffixDark) ||\n            className.endsWith(this.suffixLight));\n    }\n    isThemeClass(className) {\n        return (className.startsWith(this.prefixTheme) && this.hasVariantSuffix(className));\n    }\n    setTheme(themeName, systemAppearance = false) {\n        if (!this.isThemeClass(themeName) && systemAppearance === false) {\n            throw Error(`Provided theme name ${themeName} does not match our naming conventions. (theme-<name>-(dark,light))`);\n        }\n        if (systemAppearance) {\n            const currentSystemAppearance = getCurrentSystemAppearance();\n            this.replaceBodyThemeClass(themeName);\n            this.setVariant(currentSystemAppearance);\n            return;\n        }\n        this.replaceBodyThemeClass(themeName);\n    }\n    replaceBodyThemeClass(themeName) {\n        const oldThemes = [];\n        document.body.classList.forEach((className) => {\n            if (this.isThemeClass(className)) {\n                oldThemes.push(className);\n            }\n        });\n        document.body.classList.remove(...oldThemes);\n        document.body.classList.add(themeName);\n    }\n    toggleMode() {\n        const oldThemes = [];\n        document.body.classList.forEach((className) => {\n            if (this.isThemeClass(className)) {\n                oldThemes.push(className);\n            }\n        });\n        if (oldThemes.length === 0) {\n            document.body.classList.add(this.getOppositeMode(this.defaultTheme));\n            return;\n        }\n        oldThemes.forEach((themeName) => {\n            document.body.classList.replace(themeName, this.getOppositeMode(themeName));\n        });\n    }\n    getCurrentTheme() {\n        var _a;\n        return ((_a = Array.from(document.body.classList).find((className) => this.isThemeClass(className))) !== null && _a !== void 0 ? _a : `theme-${window\n            .getComputedStyle(document.body)\n            .getPropertyValue('--ix-theme-name')}`);\n    }\n    setVariant(variant = getCurrentSystemAppearance()) {\n        const currentTheme = this.getCurrentTheme();\n        document.body.classList.remove(currentTheme);\n        if (currentTheme.endsWith(this.suffixDark)) {\n            document.body.classList.add(currentTheme.replace(/-dark$/g, `-${variant}`));\n        }\n        if (currentTheme.endsWith(this.suffixLight)) {\n            document.body.classList.add(currentTheme.replace(/-light$/g, `-${variant}`));\n        }\n    }\n    getOppositeMode(themeName) {\n        if (themeName.endsWith(this.suffixDark)) {\n            return themeName.replace(/-dark$/g, this.suffixLight);\n        }\n        if (themeName.endsWith(this.suffixLight)) {\n            return themeName.replace(/-light$/g, this.suffixDark);\n        }\n        return '';\n    }\n    handleMutations(mutations) {\n        return mutations.forEach((mutation) => {\n            const { target } = mutation;\n            target.classList.forEach((className) => {\n                var _a;\n                if (this.isThemeClass(className) &&\n                    !((_a = mutation.oldValue) === null || _a === void 0 ? void 0 : _a.includes(className))) {\n                    this._themeChanged.emit(className);\n                }\n            });\n        });\n    }\n    registerMutationObserver() {\n        if (typeof window === 'undefined') {\n            return;\n        }\n        if (!('MutationObserver' in window)) {\n            console.warn('ThemeSwitcher not supported by your browser. Missing MutationObserver API');\n            return;\n        }\n        this.mutationObserver = new MutationObserver((mutations) => {\n            this.handleMutations(mutations);\n        });\n        this.mutationObserver.observe(document.body, {\n            attributeFilter: ['class'],\n            attributeOldValue: true,\n        });\n    }\n    constructor() {\n        this.prefixTheme = 'theme-';\n        this.suffixLight = '-light';\n        this.suffixDark = '-dark';\n        this.defaultTheme = 'theme-classic-dark';\n        this._themeChanged = new TypedEvent();\n        this.registerMutationObserver();\n    }\n}\nexport const getCurrentSystemAppearance = () => {\n    const matchMedia = window.matchMedia('(prefers-color-scheme: dark)');\n    if (matchMedia.matches) {\n        return 'dark';\n    }\n    return 'light';\n};\nexport const themeSwitcher = new ThemeSwitcher();\n//# sourceMappingURL=theme-switcher.js.map\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}