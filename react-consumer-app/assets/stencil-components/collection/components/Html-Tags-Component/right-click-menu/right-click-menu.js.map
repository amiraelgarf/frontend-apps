{"version":3,"file":"right-click-menu.js","sourceRoot":"","sources":["../../../../../src/components/Html-Tags-Component/right-click-menu/right-click-menu.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, State,Element,Watch,h } from '@stencil/core';\r\n\r\n\r\ntype DataItem={\r\n    idItem:string //for when selecting spesific item\r\n    iconImage: string\r\n    textData:string\r\n    functionality: (...args:any) => any//if there is a functinality for this item on the Menu\r\n    hasChildren:boolean\r\n    children: DataItem [] //if it has children\r\n    isDivisor:boolean\r\n}\r\n\r\n@Component({\r\n    tag:\"right-click-menu\",\r\n    styleUrl:\"right-click-menu.css\",\r\n    shadow:true\r\n})\r\nexport class RightClickMenu\r\n{\r\n    @Prop() theItems: DataItem[] = [];\r\n    @State() menuVisible:boolean = false;\r\n\r\n    @State() menuPosition: { x: number; y: number } = { x: 0, y: 0 };//the mouse click position\r\n\r\n    @State() adjustedPosition: { x: number; y: number } = { x: 0, y: 0 };//the adjusted position of the menu to keep it within the viewport\r\n\r\n    @State() submenuAdjustedPositionX: number = 250; //calculated X position for submenus (left or right of parent)\r\n\r\n    @Element() hostElement!: HTMLElement;//dah bi3br 3n al <right-click-menu>\r\n\r\n    private menuElementRef!: HTMLUListElement; //dah represent al <ul>\r\n\r\n     componentDidLoad() {//3mlna kida 3lshan ikon global Event Listener\r\n\r\n        // Attach the right-click event listener to the host element\r\n        this.hostElement.addEventListener('contextmenu', this.handleRightClick.bind(this));\r\n        // Attach a click event listener to the entire document to close the menu\r\n        // when the user clicks anywhere outside of it.\r\n        document.addEventListener('click', this.handleClickOutside.bind(this));\r\n    }\r\n\r\n    disconnectedCallback() {//For memory leaks\r\n        this.hostElement.removeEventListener('contextmenu', this.handleRightClick.bind(this));\r\n        document.removeEventListener('click', this.handleClickOutside.bind(this));\r\n    }\r\n\r\n    @Watch('menuVisible')\r\n    @Watch('menuPosition')\r\n    adjustMenuPosition() {\r\n        // Only adjust if the menu is visible and its DOM element is available\r\n        if (this.menuVisible && this.menuElementRef) {\r\n            const viewportWidth = window.innerWidth;\r\n            const viewportHeight = window.innerHeight;\r\n            const menuWidth = 260; \r\n            const menuHeight = this.menuElementRef.offsetHeight; // Get actual height of the menu\r\n\r\n            let xPos = this.menuPosition.x;\r\n            let yPos = this.menuPosition.y;\r\n\r\n            // Adjust X position: If menu goes off right edge, move it left\r\n            if (xPos + menuWidth > viewportWidth) {\r\n                xPos = viewportWidth - menuWidth;\r\n            }\r\n            // Adjust Y position: If menu goes off bottom edge, move it up\r\n            if (yPos + menuHeight > viewportHeight) {\r\n                yPos = viewportHeight - menuHeight;\r\n            }\r\n\r\n            // Update the adjusted position state, triggering a re-render\r\n            this.adjustedPosition = { x: xPos, y: yPos };\r\n\r\n            // Calculate submenu X position: If submenu would go off right edge,\r\n            // position it to the left of its parent menu item.\r\n            const submenuWidth = 150;\r\n            this.submenuAdjustedPositionX = (xPos + menuWidth + submenuWidth > viewportWidth) ? -submenuWidth : menuWidth;\r\n        }\r\n    }\r\n\r\n    //Show the custom menu \r\n    handleRightClick(e: MouseEvent) {\r\n        e.preventDefault(); \r\n        this.menuPosition = { x: e.clientX, y: e.clientY }; // store the location of the mouse click\r\n        this.menuVisible = true; //dah hi5li al Watch tsht8l\r\n    }\r\n\r\n    //If clicked outside the the menu area\r\n    handleClickOutside(e: MouseEvent) {\r\n        if (this.menuVisible \r\n            && this.menuElementRef //for safe check\r\n            && !this.menuElementRef.contains(e.target as Node)//if it NOT inside the menu\r\n        )\r\n        {\r\n            this.menuVisible = false; // Hide the menu\r\n        }\r\n    }\r\n    \r\n    renderTheMenu(item:DataItem)\r\n    {\r\n        if(item.isDivisor)\r\n        {\r\n            return(<hr class = \"menu-divider\"></hr>)\r\n        }\r\n\r\n        return(<li \r\n        id={item.idItem} \r\n        class={{ 'has-submenu': item.hasChildren }}//if he has children this the class= 'has-submenu'\r\n        onClick={() => {\r\n                    // Execute the functionality if provided\r\n                    if (item.functionality) {\r\n                        item.functionality();\r\n                    }\r\n                    this.menuVisible = false; // Close the menu after an item is clicked\r\n                }}\r\n        >\r\n        {item.iconImage && (\r\n            <img src={item.iconImage} alt={item.iconImage ||'icon'}>\r\n            </img>\r\n        )}\r\n        {item.textData}\r\n        {item.hasChildren &&(\r\n            <ul  class=\"submenu\" style={{\r\n                        top: '0px', \r\n                        left: `${this.submenuAdjustedPositionX}px`, //left or right of the menu \r\n                    }}>\r\n                {item.children.map(child=> this.renderTheMenu(child))}\r\n            </ul>\r\n        )}\r\n        </li>);\r\n    }\r\n    render(){\r\n        return(<div  style={{ height: '100vh', width: '100vw', overflow: 'hidden', position: 'relative' }}>\r\n            {this.menuVisible && ( \r\n                <ul\r\n                        ref={(el) => this.menuElementRef = el as HTMLUListElement} //3lshan calculation when click\r\n                        class=\"context-menu\"\r\n                        style={{\r\n                            // ensure the menu doesn't go off the bottom of the viewport\r\n                            top: `${this.adjustedPosition.y}px`, \r\n                            left: `${this.adjustedPosition.x}px` \r\n                        }}>\r\n                    {this.theItems.map(i=>this.renderTheMenu(i))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n\r\n        )\r\n    }\r\n}"]}